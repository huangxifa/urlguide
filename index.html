<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>很有范的导航站</title>
    <link rel="shortcut icon" href="favcion.ico" />
    <link rel="stylesheet" href=" css/iconfont.css">
    <link rel="stylesheet" href="../plug-in/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/layui.css">
</head>

<body>
    <div class="container" id="container">
        <aside class="left-bar" id="leftBar">
            <div class="title">
                <p>导航</p>
            </div>
            <nav class="nav">
                <div class="item active"><a href=""><i class="iconfont icon-daohang2"></i>极客导航</a><i class="line"></i></div>
                <ul class="nav-item" id="navItem">
                    <li><a href="#bbs" class="active"><i class="iconfont icon-shequ"></i>开发社区</a></li>
                    <li><a href="#sill"><i class="iconfont icon-blogger"></i>技术博客</a></li>
                    <li><a href="#docs"><i class="iconfont icon-wendangdocument78"></i>开发文档</a></li>
                    <li><a href="#tools"><i class="iconfont icon-tool"></i>实用工具</a></li>
                    <li><a href="#design"><i class="iconfont icon-designer"></i>设计资源</a></li>
                    <li><a href="#study"><i class="iconfont icon-xuexi1"></i>学无止境</a></li>
                    <li><a href="#operation"><i class="iconfont icon-yunying"></i>网络运营</a></li>
                    <li class="download"><a href=""><i class="iconfont icon-github"></i>源码下载</a></li>
                </ul>
                <!-- <div class="item comment"><a target="_blank" href="http://www.topideal.com"><i class="iconfont icon-liuyan"></i>留言</a></div> -->
                <div class="item comment"><a onclick=addmenu()><i class="iconfont icon-liuyan"></i>添加</a></div>
            </nav>
        </aside>
        <section class="main">
            <div id="mainContent">
                <!-- 手机端菜单 -->
                <div id="menu-box">
                    <div id="menu">
                        <input type="checkbox" id="menu-form">
                        <label for="menu-form" class="menu-spin">
                        <div class="line diagonal line-1"></div>
                        <div class="line horizontal"></div>
                        <div class="line diagonal line-2"></div>
                      </label>
                    </div>
                </div>
                <!-- 学无止境 -->
                <div class="boxbody">
                    <div class="box">
                        <a href="#" name="study"></a>
                        <div class="sub-category">
                            <div><i class="iconfont icon-xuexi1"></i>学无止境</div>
                        </div>
                        <div>
                            <a target="_blank" href="https://www.w3cschool.cn/">
                                <div class="item">
                                    <div class="no-logo">w3cschool</div>
                                    <div class="desc">学编程，从W3cschool开始</div>
                                </div>
                            </a>
                            <a target="_blank" href="https://www.imooc.com/">
                                <div class="item">
                                    <div class="no-logo">慕课网</div>
                                    <div class="desc">程序员的梦工厂</div>
                                </div>
                            </a>
                            <a target="_blank" href="http://study.163.com/">
                                <div class="item">
                                    <div class="no-logo">网易云课堂</div>
                                    <div class="desc">网易公司研发的一款大型在线教育平台服务</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <footer class="footer">
                    <div class="copyright">
                        <div>
                            Copyright © 2018- 2050
                            <a href="http://www.topideal.com">导航</a>
                        </div>
                    </div>
                </footer>
                <div id="fixedBar"><svg class="Zi Zi--BackToTop" title="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg></div>
        </section>
        <script src="js/jquery.js"></script>
        <script>
            var oMenu = document.getElementById('menu');
            var oLeftBar = document.getElementById('leftBar');
            var menuFrom = document.getElementById('menu-form');

            oMenu.onclick = function() {
                if (oLeftBar.offsetLeft == 0) {
                    oLeftBar.style.left = -249 + 'px';
                } else {
                    oLeftBar.style.left = 0;
                }
            }


            // 监听页面宽度变化
            window.onresize = function() {
                judgeWidth();
                // console.log(document.documentElement.clientWidth);
            };

            // 判断页面宽度
            function judgeWidth() {
                if (document.documentElement.clientWidth > 481) {
                    oLeftBar.style.left = 0;
                } else {
                    oLeftBar.style.left = -249 + 'px';
                }
            }

            //点击左侧导航栏
            var oNavItem = document.getElementById('navItem');
            var aA = oNavItem.getElementsByTagName('a');
            for (var i = 0; i < aA.length; i++) {
                aA[i].onclick = function() {
                    for (var j = 0; j < aA.length; j++) {
                        aA[j].className = '';
                    }
                    this.className = 'active';
                    if (oLeftBar.offsetLeft == 0) {
                        if (document.documentElement.clientWidth <= 481) {
                            oLeftBar.style.left = -249 + 'px';
                            menuFrom.checked = false;

                        }
                    }
                }
            }

            $(window).scroll(function() {
                if ($(window).scrollTop() >= 200) {
                    $('#fixedBar').fadeIn(300);
                } else {
                    $('#fixedBar').fadeOut(300);
                }
            });
            //回到顶部按钮
            $('#fixedBar').click(function() {
                $('html,body').animate({
                    scrollTop: '0px'
                }, 800);
            })
        </script>
        <script src="layui.all.js"></script>
        <script>
            var local = {
                "ofc": [{
                    "title": "测试环境",
                    "url": "http://106.75.147.121:8080/login",
                    "desc": "ofc的测试环境"
                }, {
                    "title": "线上环境",
                    "url": "http://www.chinaicip.com:8009/ofc/login",
                    "desc": "ofc的线上环境"
                }, {
                    "title": "sso",
                    "url": "http://www.chinaicip.com:8009/sso/login",
                    "desc": "sso统一登录平台"
                }],
                "ema": [{
                    "title": "EMA",
                    "url": "http://www.chinaicip.com:8009/ema/login",
                    "desc": "describe"
                }],
                "jira": [{
                    "title": "首页",
                    "url": "https://topideal.us/jira/projects/OMS/issues/OMS-697?filter=allopenissues",
                    "desc": "describe"
                }, {
                    "title": "订单履约中心看板",
                    "url": "https://topideal.us/jira/projects/OMS/issues/OMS-2400?filter=allopenissues",
                    "desc": "describe"
                }, {
                    "title": "武汉研发中心看板",
                    "url": "https://topideal.us/jira/secure/RapidBoard.jspa?rapidView=77&projectKey=WHDR",
                    "desc": "describe"
                }],
                "开发专区": [{
                    "title": "gitlab",
                    "url": "https://topideal.us/gitlab",
                    "desc": "topideal"
                }],
                "测试专区": [{
                    "title": "gitlab",
                    "url": "https://topideal.us/gitlab",
                    "desc": "topideal"
                }],
                "myself": [{
                    "title": "gitlab",
                    "url": "https://topideal.us/gitlab",
                    "desc": "topideal"
                }]
            }

            function addmenu() {
                layer.open({
                    content: `<div> <label class="layui-form-label">标题:</label><div class="layui-input-block">
      <input type="text" id="menuname" name="menuname" required  lay-verify="required" placeholder="请输入菜单" autocomplete="off" class="layui-input">
    </div>       `,
                    btn: ['yes', '关闭'],
                    yes: function(index) {
                        menu = $("#menuname").val()
                            // console.log(menu)
                        localval[menu] = []
                        localStorage.setItem("localMenu", JSON.stringify(localval))
                    }
                })

            }

            function addurl(menuparam) {
                var menukey = Object.keys(localval)
                    // var menuselect = `url目录：<select id="menu">`;
                    // for (i = 0; i < menukey.length; i++) {
                    //     menuselect += ` <option id=${menukey[i]} value=${menukey[i]}>${menukey[i]}</option>`
                    // }
                    // menuselect += "</select>"
                layer.open({
                    content: `<div> <label class="layui-form-label">标题:</label><div class="layui-input-block">
      <input type="text" id="title" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
    </div>        <label class="layui-form-label">url:</label><div class="layui-input-block">
      <input type="text" id="url" name="url" required  lay-verify="required" placeholder="请输url" autocomplete="off" class="layui-input">
    </div>     <label class="layui-form-label">说明:</label><div class="layui-input-block">
      <input type="text" id="desc" name=desc required  lay-verify="required" placeholder="请输url描述" autocomplete="off" class="layui-input">
    </div> </div>`,
                    btn: ['yes', '关闭'],
                    yes: function(index) {

                        newtitle = $("#title").val()
                        newurl = $("#url").val()
                        newdesc = $("#desc").val()
                            // newmenu = $('#menu option:selected').text();
                        var flag = true;
                        if (newurl != "") {
                            for (i = 0; i < localval[menuparam].length; i++) {
                                localurl = localval[menuparam][i]
                                    // console.log("ttt" + localurl)
                                if (localurl != null && newurl == localurl.url) {
                                    flag = false
                                }
                            }
                            if (flag == true) {
                                urloption = {
                                    "title": newtitle,
                                    "url": newurl,
                                    "desc": newdesc
                                }
                                localval[menuparam].push(urloption)
                                localStorage.setItem("localMenu", JSON.stringify(localval))

                            }
                        } else {
                            layer.alert("url不能为空")
                        }
                        location.reload()
                    }
                })
            }
            $(document).ready(function() {
                localval = JSON.parse(localStorage.getItem("localMenu"))
                if (localval == null) {
                    localval = local
                }
                // console.log(localval)

                // }
                var menukey = Object.keys(localval)
                var strmenu = ""
                var strnav = ""
                for (i = 0; i < menukey.length; i++) {
                    var urllist = localval[menukey[i]]
                    urlcount = urllist.length

                    strmenu += `  <div class="box"><a href="#" name=${menukey[i]}></a>
                    <div class="sub-category">
                        <div><i class="iconfont icon-xuexi1"></i>${menukey[i]}<button class="layui-btn-sm layui-btn-radius layui-btn-primary" onclick=addurl("${menukey[i]}")>添加链接</button></div>
                    </div> `
                    var strbody = '<div>'
                    for (j = 0; j < urlcount; j++) {
                        strbody += `
                        <a target="_blank" href="${urllist[j].url}">
                            <div class="item">
                                <div class="no-logo">${urllist[j].title}</div>
                                <div class="desc">${urllist[j].desc}</div>
                            </div>
                        </a>
                        `
                    }
                    strnav += `
                    <li><a href="#${menukey[i]}" ><i class="iconfont icon-shequ"></i>${menukey[i]}</a></li>
                    `
                    strmenu += strbody
                    strmenu += "</div></div>"
                }
                $(".boxbody").html(strmenu)
                $(".nav-item").html(strnav)

            })
        </script>
</body>

</html>